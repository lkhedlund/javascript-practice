<!DOCTYPE HTML>
<html>
  <head>
    <title>D3 Charts and Graphs</title>
    <link href='main.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <svg class="chart"></svg>
    <!-- Start JS -->
    <script src="../d3.js"  charset="utf-8"></script>
    <script>
    var width = 960,
      height = 500;

    var x = d3.scale.ordinal()
      .rangeRoundBands([0, width], .1);

    var y = d3.scale.linear()
    /* The range becomes [height, 0] rather than [0, width]. This is because the origin of SVGâ€™s coordinate system is in the top-left corner. We want the zero-value to be positioned at the bottom of the chart, rather than the top. */
      .range([height, 0]);

    var chart = d3.select('.chart')
      .attr('width', width)
      .attr('height', height);

    d3.csv("data.csv", type, function(error, data) {
      x.domain(data.map(function(d) { return d.name; }));
      y.domain([0, d3.max(data, function(d) { return d.value; })]);

      var bar = chart.selectAll('g')
          .data(data)
        .enter().append('g')
          .attr('transform', function(d, i) {
            return 'translate(' + x(d.name) + ',0)';
          });

      bar.append('rect')
        .attr('y', function(d) { return y(d.value); })
        .attr('height', function(d) { return height - y(d.value); })
        .attr('width', x.rangeBand());

      bar.append('text')
        .attr('y', function(d) { return y(d.value) + 3; })
        .attr('x', x.rangeBand() / 2)
        .attr('dy', '.75em')
        .text(function(d) { return d.value; });
      });

      function type(d) {
        d.value = +d.value;
        return d;
      }
    </script>
  </body>
</html>
